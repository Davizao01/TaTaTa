<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Battle: Legends Awaken</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
        }
        #hud {
            margin-bottom: 20px;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
            display: inline-block;
        }
        #mapa {
            font-family: monospace;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
            white-space: pre;
            text-align: left;
            margin: 0 auto;
        }
        #status {
            display: none;
            margin-top: 20px;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
        }
        button {
            margin-top: 10px;
        }
        .player {
            color: blue; /* Cor para o jogador */
        }
        .enemy {
            color: red; /* Cor para o inimigo */
        }
        .chest {
            color: green; /* Cor para ba√∫ */
        }
        .narrativa {
            margin-top: 20px;
            font-size: 1.2em;
            color: #333;
        }
        #login, #menu, #game {
            display: none;
        }
    </style>
</head>
<body>
    <div id="login">
        <h1>Tela de Login</h1>
        <input type="text" id="username" placeholder="Nome de Usu√°rio">
        <button onclick="login()">Entrar</button>
        <p id="loginError" style="color:red;"></p>
    </div>

    <div id="menu">
        <h1>Menu Principal</h1>
        <button onclick="iniciarJogo()">Iniciar Jogo</button>
        <button onclick="mostrarInstrucoes()">Instru√ß√µes</button>
    </div>

    <div id="game">
        <h1>Dragon Battle: Legends Awaken</h1>
        <div id="hud">
            <h2>HUD</h2>
            <p>Vida: <span id="vida">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></p>
            <p>Ki: <span id="ki">üîµüîµüîµ</span></p>
            <p>Arma: <span id="arma">Nenhuma</span></p>
            <p>Experi√™ncia: <span id="experiencia">0</span></p>
            <button onclick="mostrarStatus()">Status</button>
        </div>

        <div id="mapa"></div>

        <div id="status">
            <h2>Status do Jogador</h2>
            <p>Vida: <span id="vidaTotal">3 pontos</span></p>
            <p>Ki: <span id="kiTotal">3 pontos</span></p>
            <p>N√≠vel: <span id="nivel">1</span></p>
            <p>Transforma√ß√£o: <span id="transformacao">Nenhuma</span></p>
            <p>Habilidades: <span id="habilidades">Nenhuma</span></p>
            <button onclick="esconderStatus()">Fechar</button>
        </div>

        <div id="narrativa" class="narrativa"></div>
    </div>

    <script>
        let currentPlayerName = "";
        const mapRows = 10;
        const mapCols = 10;
        const playerSymbol = 'üë§';
        const enemySymbol = 'üëπ';
        const chestSymbol = 'ü™ô';
        let playerPosition = { x: 1, y: 1 };
        let enemyPosition = { x: 8, y: 8 };
        let chestPosition = { x: 5, y: 5 }; // Posi√ß√£o do ba√∫
        let playerLife = 3;
        let playerKi = 3;
        let experiencia = 0;
        let nivel = 1;
        let hasSword = false; // Status da arma
        let transformacaoAtiva = false; // Status da transforma√ß√£o
        let habilidades = [];
        const maxNivel = 5; // N√≠vel m√°ximo

        // Fun√ß√£o de Login
        function login() {
            const usernameInput = document.getElementById('username').value;
            if (usernameInput) {
                currentPlayerName = usernameInput;
                document.getElementById('login').style.display = 'none';
                document.getElementById('menu').style.display = 'block';
            } else {
                document.getElementById('loginError').innerText = "Por favor, insira um nome de usu√°rio.";
            }
        }

        function iniciarJogo() {
            document.getElementById('menu').style.display = 'none';
            document.getElementById('game').style.display = 'block';
            atualizarMapa();
            document.getElementById('narrativa').innerText = 'Voc√™ √© um guerreiro em busca de poder e aventura. Explore o mapa e enfrente inimigos!';
        }

        function mostrarInstrucoes() {
            alert("Use as teclas de seta para se mover. Z para coletar a espada, T para transformar.");
        }

        function atualizarMapa() {
            const mapa = [];
            for (let i = 0; i < mapRows; i++) {
                let linha = '';
                for (let j = 0; j < mapCols; j++) {
                    if (i === playerPosition.y && j === playerPosition.x) {
                        linha += `<span class="player">${playerSymbol}</span>`;
                    } else if (i === enemyPosition.y && j === enemyPosition.x) {
                        linha += `<span class="enemy">${enemySymbol}</span>`;
                    } else if (i === chestPosition.y && j === chestPosition.x) {
                        linha += `<span class="chest">${chestSymbol}</span>`;
                    } else {
                        linha += 'üü©'; // Blocos do mapa
                    }
                }
                mapa.push(linha);
            }
            document.getElementById('mapa').innerHTML = mapa.join('<br>');
        }

        function mostrarStatus() {
            document.getElementById('vidaTotal').innerText = playerLife + ' pontos';
            document.getElementById('kiTotal').innerText = playerKi + ' pontos';
            document.getElementById('nivel').innerText = nivel;
            document.getElementById('transformacao').innerText = transformacaoAtiva ? 'Super Saiyajin' : 'Nenhuma';
            document.getElementById('habilidades').innerText = habilidades.length > 0 ? habilidades.join(', ') : 'Nenhuma';
            document.getElementById('status').style.display = 'block';
        }

        function esconderStatus() {
            document.getElementById('status').style.display = 'none';
        }

        function moverPlayer(direcao) {
            if (direcao === 'up' && playerPosition.y > 0) playerPosition.y--;
            if (direcao === 'down' && playerPosition.y < mapRows - 1) playerPosition.y++;
            if (direcao === 'left' && playerPosition.x > 0) playerPosition.x--;
            if (direcao === 'right' && playerPosition.x < mapCols - 1) playerPosition.x++;

            atualizarMapa();
            checarCombate();
            checarBa√∫();
        }

        function checarCombate() {
            if (playerPosition.x === enemyPosition.x && playerPosition.y === enemyPosition.y) {
                alert('Voc√™ encontrou o inimigo! Preparar para lutar!');
                iniciarCombate();
            }
        }

        function checarBa√∫() {
            if (playerPosition.x === chestPosition.x && playerPosition.y === chestPosition.y) {
                alert('Voc√™ encontrou um ba√∫! Voc√™ coletou uma espada e 1 ponto de vida!');
                hasSword = true;
                document.getElementById('arma').innerText = 'Espada';
                playerLife += 1;
                document.getElementById('vida').innerText = '‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è';
                experiencia += 1;
                document.getElementById('experiencia').innerText = experiencia;
                resetarBa√∫(); // Reposicionar o ba√∫
            }
        }

        function resetarBa√∫() {
            chestPosition.x = Math.floor(Math.random() * mapCols);
            chestPosition.y = Math.floor(Math.random() * mapRows);
            while ((chestPosition.x === playerPosition.x && chestPosition.y === playerPosition.y) ||
                   (chestPosition.x === enemyPosition.x && chestPosition.y === enemyPosition.y)) {
                chestPosition.x = Math.floor(Math.random() * mapCols);
                chestPosition.y = Math.floor(Math.random() * mapRows);
            }
        }

        function iniciarCombate() {
            while (playerLife > 0) {
                if (hasSword) {
                    alert('Voc√™ atacou o inimigo e o derrotou!');
                    experiencia += 2;
                    document.getElementById('experiencia').innerText = experiencia;
                    ganharNivel();
                    break;
                } else {
                    alert('Voc√™ n√£o tem uma arma! O inimigo ataca.');
                    playerLife -= 1; // O inimigo ataca
                    document.getElementById('vida').innerText = '‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è'.slice(0, playerLife);
                    if (playerLife <= 0) {
                        alert('Voc√™ foi derrotado! Jogo encerrado.');
                        break;
                    }
                }
            }
        }

        function ganharNivel() {
            if (experiencia >= 5 && nivel < maxNivel) {
                nivel++;
                alert('Voc√™ subiu de n√≠vel! N√≠vel atual: ' + nivel);
            }
        }

        function transformar() {
            if (nivel >= 3) {
                transformacaoAtiva = true;
                playerKi += 1; // Ganho de Ki ao se transformar
                alert('Voc√™ se transformou em Super Saiyajin!');
                document.getElementById('transformacao').innerText = 'Super Saiyajin';
            } else {
                alert('Voc√™ precisa ser pelo menos n√≠vel 3 para se transformar!');
            }
        }

        document.addEventListener('keydown', (event) => {
            if (event.key === 'ArrowUp') moverPlayer('up');
            if (event.key === 'ArrowDown') moverPlayer('down');
            if (event.key === 'ArrowLeft') moverPlayer('left');
            if (event.key === 'ArrowRight') moverPlayer('right');
            if (event.key === 'z') coletarArma(); // Tecla 'Z' para coletar a arma
            if (event.key === 't') transformar(); // Tecla 'T' para transforma√ß√£o
        });

        document.getElementById('login').style.display = 'block'; // Mostrar a tela de login

    </script>
</body>
</html>
