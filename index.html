<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Battle: Legends Awaken</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
            padding: 20px;
        }
        #hud {
            margin-bottom: 20px;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
            display: inline-block;
        }
        #mapa {
            font-family: monospace;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
            white-space: pre;
            text-align: left;
            margin: 0 auto;
        }
        #status {
            display: none;
            margin-top: 20px;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
        }
        button {
            margin-top: 10px;
        }
        .player {
            color: blue; /* Cor para o jogador */
        }
        .enemy {
            color: red; /* Cor para o inimigo */
        }
        .chest {
            color: green; /* Cor para ba√∫ */
        }
    </style>
</head>
<body>
    <h1>Dragon Battle: Legends Awaken</h1>
    
    <div id="hud">
        <h2>HUD</h2>
        <p>Vida: <span id="vida">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></p>
        <p>Ki: <span id="ki">üîµüîµüîµ</span></p>
        <p>Arma: <span id="arma">Nenhuma</span></p>
        <p>Experi√™ncia: <span id="experiencia">0</span></p>
        <button onclick="mostrarStatus()">Status</button>
    </div>

    <div id="mapa"></div>

    <div id="status">
        <h2>Status do Jogador</h2>
        <p>Vida: <span id="vidaTotal">3 pontos</span></p>
        <p>Ki: <span id="kiTotal">3 pontos</span></p>
        <p>Transforma√ß√£o: <span id="transformacao">Nenhuma</span></p>
        <p>Habilidades: <span id="habilidades">Nenhuma</span></p>
        <button onclick="esconderStatus()">Fechar</button>
    </div>

    <script>
        const mapRows = 10;
        const mapCols = 10;
        const playerSymbol = 'üë§';
        const enemySymbol = 'üëπ';
        const chestSymbol = 'ü™ô';
        let playerPosition = { x: 1, y: 1 };
        let enemyPosition = { x: 8, y: 8 };
        let chestPosition = { x: 5, y: 5 }; // Posi√ß√£o do ba√∫
        let playerLife = 3;
        let playerKi = 3;
        let experiencia = 0;
        let hasSword = false; // Status da arma
        let transformacaoAtiva = false; // Status da transforma√ß√£o
        let habilidades = [];

        function atualizarMapa() {
            const mapa = [];
            for (let i = 0; i < mapRows; i++) {
                let linha = '';
                for (let j = 0; j < mapCols; j++) {
                    if (i === playerPosition.y && j === playerPosition.x) {
                        linha += `<span class="player">${playerSymbol}</span>`;
                    } else if (i === enemyPosition.y && j === enemyPosition.x) {
                        linha += `<span class="enemy">${enemySymbol}</span>`;
                    } else if (i === chestPosition.y && j === chestPosition.x) {
                        linha += `<span class="chest">${chestSymbol}</span>`;
                    } else {
                        linha += 'üü©'; // Blocos do mapa
                    }
                }
                mapa.push(linha);
            }
            document.getElementById('mapa').innerHTML = mapa.join('<br>');
        }

        function mostrarStatus() {
            document.getElementById('vidaTotal').innerText = playerLife + ' pontos';
            document.getElementById('kiTotal').innerText = playerKi + ' pontos';
            document.getElementById('transformacao').innerText = transformacaoAtiva ? 'Super Saiyajin' : 'Nenhuma';
            document.getElementById('habilidades').innerText = habilidades.length > 0 ? habilidades.join(', ') : 'Nenhuma';
            document.getElementById('status').style.display = 'block';
        }

        function esconderStatus() {
            document.getElementById('status').style.display = 'none';
        }

        function moverPlayer(direcao) {
            if (direcao === 'up' && playerPosition.y > 0) playerPosition.y--;
            if (direcao === 'down' && playerPosition.y < mapRows - 1) playerPosition.y++;
            if (direcao === 'left' && playerPosition.x > 0) playerPosition.x--;
            if (direcao === 'right' && playerPosition.x < mapCols - 1) playerPosition.x++;

            atualizarMapa();
            checarCombate();
            checarBa√∫();
        }

        function checarCombate() {
            if (playerPosition.x === enemyPosition.x && playerPosition.y === enemyPosition.y) {
                alert('Voc√™ encontrou o inimigo! Preparar para lutar!');
                iniciarCombate();
            }
        }

        function checarBa√∫() {
            if (playerPosition.x === chestPosition.x && playerPosition.y === chestPosition.y) {
                alert('Voc√™ encontrou um ba√∫! Voc√™ coletou uma espada e 1 ponto de vida!');
                hasSword = true;
                document.getElementById('arma').innerText = 'Espada';
                playerLife += 1;
                document.getElementById('vida').innerText = '‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è';
                experiencia += 1;
                document.getElementById('experiencia').innerText = experiencia;
                resetarBa√∫(); // Reposicionar o ba√∫
            }
        }

        function resetarBa√∫() {
            chestPosition.x = Math.floor(Math.random() * mapCols);
            chestPosition.y = Math.floor(Math.random() * mapRows);
            while (chestPosition.x === playerPosition.x && chestPosition.y === playerPosition.y) {
                chestPosition.x = Math.floor(Math.random() * mapCols);
                chestPosition.y = Math.floor(Math.random() * mapRows);
            }
        }

        function iniciarCombate() {
            const ataque = hasSword ? 2 : 1; // Aumenta dano se tiver espada
            const enemyLife = 2; // Vida do inimigo
            let enemyAtualLife = enemyLife;
            
            while (playerLife > 0 && enemyAtualLife > 0) {
                enemyAtualLife -= ataque;
                alert(`Voc√™ atacou o inimigo! Vida do inimigo: ${enemyAtualLife}`);
                if (enemyAtualLife <= 0) {
                    alert('Inimigo derrotado!');
                    experiencia += 2; // Ganho de experi√™ncia ao derrotar
                    document.getElementById('experiencia').innerText = experiencia;
                    playerKi += 1; // Ganho de Ki ao derrotar
                    document.getElementById('ki').innerText = 'üîµüîµüîµüîµ';
                    return;
                }
                playerLife -= 1; // O inimigo contra-ataca
                document.getElementById('vida').innerText = '‚ù§Ô∏è‚ù§Ô∏è';
                if (playerLife <= 0) {
                    alert('Voc√™ foi derrotado!');
                    return;
                }
            }
        }

        function coletarArma() {
            hasSword = true;
            document.getElementById('arma').innerText = 'Espada';
            alert('Voc√™ coletou uma espada!');
        }

        function transformar() {
            if (!transformacaoAtiva) {
                transformacaoAtiva = true;
                alert('Voc√™ se transformou em Super Saiyajin!');
            } else {
                alert('Voc√™ j√° est√° transformado!');
            }
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowUp') moverPlayer('up');
            if (event.key === 'ArrowDown') moverPlayer('down');
            if (event.key === 'ArrowLeft') moverPlayer('left');
            if (event.key === 'ArrowRight') moverPlayer('right');
            if (event.key === 'z') coletarArma(); // Tecla 'Z' para coletar a arma
            if (event.key === 't') transformar(); // Tecla 'T' para transforma√ß√£o
        });

        atualizarMapa();
    </script>
</body>
</html>
